<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Made on Vibes DIY</title>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
      :root {
        /* Core colors */
        --vibes-black: #0f172a;
        --vibes-white: #ffffff;
        --vibes-near-black: #1a1a1a;
        --vibes-cream: #fffff0;

        /* Gray scale */
        --vibes-gray-lightest: #f1f5f9;
        --vibes-gray-ultralight: #f8fafc;

        /* Menu colors */
        --vibes-menu-bg: #CCCDC8;
        --vibes-menu-grid: rgba(255, 255, 255, 0.5);

        /* Button variant colors */
        --vibes-variant-blue: #009ACE;
        --vibes-variant-red: #DA291C;
        --vibes-variant-yellow: #DA291C;
        --vibes-variant-gray: #6b7280;

        /* Button styling */
        --vibes-button-bg: var(--vibes-cream);
        --vibes-button-text: var(--vibes-near-black);
        --vibes-button-border: var(--vibes-near-black);
        --vibes-button-icon-bg: #fff;
        --vibes-button-icon-fill: #2a2a2a;
      }
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      }
      #container {
        width: 100%;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react",
          "react-dom": "https://esm.sh/react-dom",
          "react-dom/client": "https://esm.sh/react-dom/client",
          "react/jsx-runtime": "https://esm.sh/react/jsx-runtime",
          "use-fireproof": "https://esm.sh/use-vibes@0.18.9?external=react,react-dom",
          "call-ai": "https://esm.sh/call-ai@0.18.9?external=react,react-dom",
          "use-vibes": "https://esm.sh/use-vibes@0.18.9?external=react,react-dom"
        }
      }
    </script>
    <!-- Load React globally for menu components -->
    <script type="module">
      import * as React from "react";
      window.React = React;

      // === VibesSwitch ===
      const switchColors = { primary: "var(--vibes-black)", secondary: "var(--vibes-white)" };
      function VibesSwitch({ size = 24, className, isActive, onToggle }) {
        const [internalActive, setInternalActive] = React.useState(true);
        const logicalActive = isActive !== undefined ? isActive : internalActive;
        const active = !logicalActive;
        const handlePointerDown = (e) => {
          e.stopPropagation();
          e.preventDefault();
          const newState = !logicalActive;
          if (onToggle) onToggle(newState);
          if (isActive === undefined) setInternalActive(newState);
        };
        const originalD = "M426.866,285.985c-7.999-0.416-19.597-0.733-31.141-1.687c-15.692-1.297-28.809-8.481-40.105-19.104c-12.77-12.008-20.478-26.828-22.714-44.177c-3.048-23.644,3.384-44.558,19.646-62.143c9.174-9.92,20.248-17.25,33.444-20.363c7.786-1.837,15.944-2.399,23.973-2.828c9.988-0.535,20.023-0.666,30.021-0.371c10.191,0.301,20.433,0.806,30.521,2.175c12.493,1.696,23.132,7.919,32.552,16.091c14.221,12.337,22.777,27.953,25.184,46.594c2.822,21.859-2.605,41.617-16.777,58.695c-9.494,11.441-21.349,19.648-35.722,23.502c-6.656,1.785-13.724,2.278-20.647,2.77C446.914,285.721,438.682,285.667,426.866,285.985z";
        const stretchedD = "M165.866,285.985c-7.999-0.416-19.597-0.733-31.141-1.687c-15.692-1.297-28.809-8.481-40.105-19.104c-12.77-12.008-20.478-26.828-22.714-44.177c-3.048-23.644,3.384-44.558,19.646-62.143c9.174-9.92,20.248-17.25,33.444-20.363c7.786-1.837,15.944-2.399,23.973-2.828c9.988-0.535,121.023-0.666,131.021-0.371c10.191,0.301,20.433,0.806,30.521,2.175c12.493,1.696,23.132,7.919,32.552,16.091c14.221,12.337,22.777,27.953,25.184,46.594c2.822,21.859-2.605,41.617-16.777,58.695c-9.494,11.441-21.349,19.648-35.722,23.502c-6.656,1.785-13.724,2.278-20.647,2.77C286.914,285.721,177.682,285.667,165.866,285.985z";
        return React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", height: size, viewBox: "0 0 600 300", fill: "currentColor", className, onPointerDown: handlePointerDown },
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", fill: "#000", d: "M293.353,298.09c-41.038,0-82.078,0.125-123.115-0.077c-11.993-0.06-24.011-0.701-35.964-1.703c-15.871-1.331-29.73-7.937-41.948-17.946c-16.769-13.736-27.207-31.417-30.983-52.7c-4.424-24.93,1.404-47.685,16.506-67.913c11.502-15.407,26.564-26.1,45.258-30.884c7.615-1.949,15.631-2.91,23.501-3.165c20.08-0.652,40.179-0.853,60.271-0.879c69.503-0.094,139.007-0.106,208.51,0.02c14.765,0.026,29.583,0.097,44.28,1.313c36.984,3.059,61.78,23.095,74.653,57.301c17.011,45.199-8.414,96.835-54.29,111.864c-7.919,2.595-16.165,3.721-24.434,3.871c-25.614,0.467-51.234,0.742-76.853,0.867C350.282,298.197,321.817,298.09,293.353,298.09z" }),
          React.createElement("path", { fill: "#fff", fillRule: "evenodd", clipRule: "evenodd", d: active ? stretchedD : originalD, style: { transition: "d 0.3s ease, transform 0.8s ease", transform: active ? "translateX(3px)" : "none" } }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 0.5s ease", fill: active ? switchColors.primary : switchColors.secondary }, d: "M181.891,205.861c0-5.043-0.001-10.086,0-15.129c0.001-5.046,1.679-7.539,6.606-7.695c9.292-0.294,18.653-1.051,27.888,0.707c7.614,1.449,11.523,5.954,11.902,13.446c0.066,1.312-0.313,2.752-0.857,3.966c-1.401,3.123-1.399,6.266-0.673,9.507c0.301,1.342,0.443,2.723,0.787,4.053c1.274,4.925-1.78,10.114-6.085,11.937c-3.111,1.318-6.561,2.327-9.909,2.497c-7.303,0.37-14.639,0.136-21.96,0.101c-1.165-0.005-2.345-0.181-3.488-0.422c-2.657-0.56-4.162-2.962-4.197-6.801C181.854,216.639,181.891,211.25,181.891,205.861z M204.442,192.385c-2.757,0-5.514,0-8.271,0c-3.695,0-5.151,1.669-4.712,5.403c0.369,3.14,1.05,3.735,4.225,3.737c5.024,0.004,10.05,0.109,15.07-0.014c2.028-0.05,4.167-0.27,6.04-0.98c3.182-1.207,3.639-4.256,1.008-6.455c-1.073-0.896-2.659-1.509-4.06-1.618C210.659,192.22,207.544,192.385,204.442,192.385z M204.334,211.104c0,0.045,0,0.091,0,0.137c-3.101,0-6.203-0.055-9.302,0.037c-0.823,0.024-2.257,0.373-2.344,0.794c-0.447,2.154-0.959,4.444-0.639,6.563c0.276,1.822,2.447,1.451,3.882,1.441c5.989-0.042,11.98-0.118,17.961-0.385c1.416-0.063,2.859-0.79,4.176-1.441c1.79-0.886,1.833-2.475,1.029-4.046c-1.166-2.276-3.297-3.024-5.677-3.081C210.394,211.049,207.363,211.104,204.334,211.104z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 0.8s ease", fill: active ? switchColors.primary : switchColors.secondary }, d: "M291.409,229.748c-3.621-0.394-7.838-0.587-11.94-1.379c-3.577-0.69-6.343-2.991-8.213-6.163c-1.763-2.99-0.301-5.6,3.139-5.292c2.287,0.205,4.512,1.129,6.758,1.755c6.281,1.751,12.643,1.892,19.053,0.951c0.667-0.098,1.31-0.416,1.941-0.686c1.502-0.644,2.55-1.682,2.581-3.415c0.031-1.74-1.195-2.749-2.579-3.132c-2.298-0.637-4.688-1.021-7.065-1.273c-5.062-0.536-10.252-0.401-15.187-1.475c-9.677-2.105-11.678-10.53-10.101-16.009c1.62-5.625,5.911-8.92,11.318-9.73c8.388-1.257,16.925-1.491,25.279,0.654c3.702,0.951,6.615,3.072,7.883,6.931c0.918,2.792-0.332,4.6-3.268,4.357c-1.684-0.139-3.367-0.676-4.974-1.248c-6.711-2.387-13.572-2.897-20.569-1.783c-1.001,0.159-2.146,0.414-2.875,1.034c-0.901,0.766-2.016,1.981-1.98,2.964c0.041,1.128,0.995,2.733,1.991,3.206c1.81,0.857,3.925,1.279,5.948,1.441c5.152,0.41,10.356,0.296,15.479,0.905c7.98,0.949,13.779,9.833,11.241,17.125c-1.959,5.628-6.44,8.489-12.143,9.322C299.455,229.344,295.715,229.419,291.409,229.748z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1.2s ease", fill: active ? switchColors.primary : switchColors.secondary }, d: "M235.786,208.14c0-6.905-0.01-13.809,0.004-20.714c0.007-3.474,0.948-4.428,4.415-3.758c6.62,1.279,13.232,2.651,19.759,4.331c1.7,0.438,3.404,1.896,4.515,3.341c1.777,2.31,0.433,5.367-2.463,5.745c-1.86,0.243-3.819-0.138-5.717-0.368c-2.183-0.264-4.339-0.783-6.525-0.976c-1.572-0.138-3.065,0.375-3.8,1.959c-0.76,1.638-0.319,3.329,0.942,4.34c1.619,1.296,3.522,2.327,5.447,3.128c2.146,0.894,4.539,1.207,6.66,2.145c1.446,0.64,2.982,1.687,3.786,2.981c0.689,1.11,0.928,3.094,0.378,4.202c-0.492,0.991-2.32,1.795-3.579,1.825c-2.238,0.052-4.483-0.652-6.741-0.832c-1.614-0.127-3.333-0.203-4.865,0.212c-2.574,0.699-3.225,3.013-1.719,5.218c1.396,2.044,3.431,3.141,5.757,3.761c2.791,0.744,5.637,1.315,8.373,2.222c3.19,1.058,4.791,3.496,4.801,6.723c0.011,3.365-1.759,5.021-5.138,4.424c-4.402-0.778-8.759-1.81-13.134-2.735c-2.357-0.499-4.718-0.981-7.069-1.511c-3.263-0.737-4.132-1.805-4.141-5.154c-0.019-6.836-0.006-13.672-0.006-20.508C235.747,208.141,235.766,208.14,235.786,208.14z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 0.6s ease", fill: active ? switchColors.primary : switchColors.secondary }, d: "M135.138,229.842c-2.941-0.084-5.296-1.462-6.684-3.9c-1.827-3.21-3.328-6.618-4.81-10.011c-3.55-8.128-7.021-16.291-10.486-24.455c-0.48-1.132-0.902-2.329-1.087-3.536c-0.417-2.72,1.238-4.585,3.938-4.119c1.591,0.275,3.569,0.98,4.45,2.173c2.226,3.015,4.175,6.299,5.784,9.69c2.208,4.654,3.898,9.552,6.032,14.244c0.628,1.379,2.009,2.416,3.045,3.609c0.892-1.159,2.042-2.201,2.63-3.498c2.697-5.953,5.22-11.985,7.841-17.974c1.423-3.252,3.089-6.418,6.532-7.905c1.238-0.535,3.012-0.712,4.184-0.214c0.81,0.344,1.377,2.126,1.385,3.271c0.009,1.458-0.479,2.997-1.059,4.371c-4.227,10.013-8.504,20.005-12.833,29.974c-0.79,1.819-1.762,3.589-2.875,5.229C139.73,228.848,137.671,229.894,135.138,229.842z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1.3s ease", fill: active ? switchColors.primary : switchColors.secondary }, d: "M164.636,206.263c0-6.691,0.054-13.383-0.036-20.073c-0.024-1.851,0.716-2.67,2.449-2.81c0.274-0.022,0.549-0.054,0.823-0.076c5.488-0.445,6.091,0.105,6.091,5.562c0,12.348,0,24.695,0,37.043c0,2.887-0.354,3.405-3.222,3.618c-1.628,0.121-3.338-0.001-4.91-0.408c-0.593-0.153-1.265-1.408-1.278-2.171c-0.096-5.584-0.034-11.172-0.022-16.759c0.002-1.308,0-2.617,0-3.926C164.566,206.263,164.601,206.263,164.636,206.263z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1s ease", fill: active ? switchColors.secondary : switchColors.primary }, d: "M388.313,210.147c0-6.356,0.034-12.713-0.023-19.069c-0.015-1.61,0.359-2.472,2.19-2.346c2.887,0.198,5.809,0.045,8.671,0.398c4.396,0.542,8.019,4.294,8.144,8.904c0.223,8.142,0.265,16.304-0.074,24.439c-0.248,5.945-4.552,9.662-10.491,9.831c-1.999,0.057-4.003-0.081-6.006-0.09c-1.746-0.008-2.439-0.853-2.428-2.584C388.34,223.136,388.313,216.642,388.313,210.147z M393.418,210.324c-0.037,0-0.075,0-0.114,0c0,4.55-0.038,9.101,0.015,13.65c0.031,2.688,0.926,3.439,3.56,3.239c3.273-0.248,5.493-2.511,5.534-6.04c0.082-7.099,0.054-14.2-0.033-21.299c-0.041-3.268-1.739-5.241-4.87-6.092c-2.68-0.728-4.025,0.161-4.07,2.896C393.364,201.226,393.418,205.775,393.418,210.324z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1s ease", fill: active ? switchColors.secondary : switchColors.primary }, d: "M416.875,210.721c0.068-3.305,1.849-5.306,4.727-5.309c2.765-0.003,4.924,2.404,4.816,5.371c-0.106,2.956-2.355,5.212-5.12,5.138C418.626,215.849,416.813,213.718,416.875,210.721z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1s ease", fill: active ? switchColors.secondary : switchColors.primary }, d: "M440.516,210.627c0,6.281,0.007,12.563-0.004,18.844c-0.004,2.067-0.805,3.038-2.531,3.015c-1.877-0.025-2.365-1.136-2.359-2.876c0.046-12.631,0.019-25.263,0.029-37.895c0.002-2.592,0.525-3.205,2.419-3.148c1.856,0.057,2.479,1.03,2.466,2.803C440.484,197.788,440.515,204.208,440.516,210.627z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1s ease", fill: active ? switchColors.secondary : switchColors.primary }, d: "M449.933,210.636c0.102-3.331,1.886-5.279,4.778-5.22c2.67,0.055,4.829,2.432,4.762,5.243c-0.073,3.021-2.404,5.36-5.242,5.261C451.606,215.829,449.84,213.657,449.933,210.636z" }),
          React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", style: { transition: "fill 1s ease", fill: active ? switchColors.secondary : switchColors.primary }, d: "M478.079,200.8c0.674-1.566,1.121-2.53,1.506-3.519c0.673-1.73,1.252-3.5,1.981-5.205c0.315-0.737,0.766-1.654,1.407-1.961c1.094-0.523,2.388-0.63,3.598-0.912c0.205,1.142,0.798,2.381,0.537,3.404c-0.606,2.388-1.448,4.756-2.507,6.984c-3.981,8.389-4.352,17.254-3.78,26.282c0.091,1.438,0.031,2.899-0.105,4.335c-0.14,1.473-0.989,2.428-2.542,2.497c-1.514,0.067-2.311-0.903-2.54-2.23c-0.232-1.348-0.394-2.754-0.277-4.108c0.94-10.972-1.116-21.38-5.626-31.375c-0.586-1.298-0.899-2.762-1.093-4.183c-0.233-1.712,0.825-2.592,2.379-1.843c1.164,0.561,2.345,1.55,2.973,2.657c1.078,1.897,1.712,4.043,2.568,6.07C476.918,198.547,477.37,199.361,478.079,200.8z" })
        );
      }
      window.VibesSwitch = VibesSwitch;

      // === HiddenMenuWrapper styles ===
      const hiddenMenuTheme = {
        colors: { menuBg: "var(--vibes-menu-bg)", menuText: "var(--vibes-black)", contentBg: "#1e1e1e", shadow: "rgba(0,0,0,0.3)", gridLineColor: "var(--vibes-menu-grid)" },
        zIndex: { menu: 5, content: 10, toggle: 20 },
        dimensions: { gridSize: "40px", padding: "24px", bottomOffset: "16px" },
        animation: { duration: "0.4s", easing: "ease", blurAmount: "4px" }
      };
      const getWrapperStyle = () => ({ position: "relative", overflow: "hidden" });
      const getMenuStyle = () => ({ position: "fixed", bottom: 0, left: 0, right: 0, zIndex: hiddenMenuTheme.zIndex.menu, color: hiddenMenuTheme.colors.menuText, padding: hiddenMenuTheme.dimensions.padding, boxShadow: "0 -2px 10px " + hiddenMenuTheme.colors.shadow, backgroundColor: hiddenMenuTheme.colors.menuBg, backgroundImage: "linear-gradient(" + hiddenMenuTheme.colors.gridLineColor + " 1px, transparent 1px), linear-gradient(90deg, " + hiddenMenuTheme.colors.gridLineColor + " 1px, transparent 1px)", backgroundSize: hiddenMenuTheme.dimensions.gridSize + " " + hiddenMenuTheme.dimensions.gridSize });
      const getContentWrapperStyle = (menuHeight, menuOpen, isBouncing) => ({ position: "fixed", top: 0, left: 0, right: 0, bottom: 0, zIndex: hiddenMenuTheme.zIndex.content, transition: isBouncing ? "filter 0.3s " + hiddenMenuTheme.animation.easing : "transform " + hiddenMenuTheme.animation.duration + " " + hiddenMenuTheme.animation.easing + ", filter 0.3s " + hiddenMenuTheme.animation.easing, transform: menuOpen ? "translateY(-" + menuHeight + "px)" : "translateY(0)", overflowY: "auto", borderTopColor: hiddenMenuTheme.colors.menuBg, borderTopWidth: "1px", borderTopStyle: "solid", boxShadow: "0 -2px 10px " + hiddenMenuTheme.colors.shadow, backgroundColor: hiddenMenuTheme.colors.contentBg, animation: isBouncing ? "vibes-drop-to-close 0.8s cubic-bezier(0.25,0.46,0.45,0.94)" : undefined, willChange: isBouncing ? "transform" : undefined });
      const getInnerContentWrapperStyle = (menuOpen) => ({ filter: menuOpen ? "blur(" + hiddenMenuTheme.animation.blurAmount + ")" : "none", width: "100%", height: "100%" });
      const getToggleButtonStyle = () => ({ position: "fixed", bottom: hiddenMenuTheme.dimensions.bottomOffset, right: 0, zIndex: hiddenMenuTheme.zIndex.toggle, backgroundColor: "transparent", border: "none", cursor: "pointer" });

      // === HiddenMenuWrapper ===
      function HiddenMenuWrapper({ children, menuContent, showVibesSwitch = true }) {
        const [menuOpen, setMenuOpen] = React.useState(false);
        const [menuHeight, setMenuHeight] = React.useState(0);
        const menuRef = React.useRef(null);
        const buttonRef = React.useRef(null);
        const [isBouncing, setIsBouncing] = React.useState(false);
        const [hasBouncedOnMount, setHasBouncedOnMount] = React.useState(false);

        React.useEffect(() => {
          if (!hasBouncedOnMount && !menuOpen) {
            const prefersReducedMotion = window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches || false;
            if (!prefersReducedMotion) {
              setIsBouncing(true);
              setTimeout(() => setIsBouncing(false), 800);
            }
            setHasBouncedOnMount(true);
          }
        }, [hasBouncedOnMount, menuOpen]);

        React.useEffect(() => {
          const styleId = "vibes-drop-to-close-keyframes";
          if (!document.getElementById(styleId)) {
            const style = document.createElement("style");
            style.id = styleId;
            style.textContent = "@keyframes vibes-drop-to-close { 0% { transform: translateY(-400px); } 10% { transform: translateY(0); } 25% { transform: translateY(-175px); } 35% { transform: translateY(0); } 48% { transform: translateY(-75px); } 62% { transform: translateY(0); } 72% { transform: translateY(-25px); } 80% { transform: translateY(0); } 82% { transform: translateY(-10px); } 88% { transform: translateY(0); } 91% { transform: translateY(-5px); } 95% { transform: translateY(0); } 100% { transform: translateY(0); } }";
            document.head.appendChild(style);
          }
        }, []);

        React.useEffect(() => {
          if (menuRef.current) setMenuHeight(menuRef.current.offsetHeight);
        }, [menuContent]);

        React.useEffect(() => {
          const handleKeyDown = (e) => {
            if (e.key === "Escape" && menuOpen) {
              setMenuOpen(false);
              buttonRef.current?.focus();
            }
          };
          document.addEventListener("keydown", handleKeyDown);
          return () => document.removeEventListener("keydown", handleKeyDown);
        }, [menuOpen]);

        return React.createElement("div", { style: getWrapperStyle() },
          React.createElement("div", { ref: menuRef, style: getMenuStyle() }, menuContent),
          React.createElement("div", { style: getContentWrapperStyle(menuHeight, menuOpen, isBouncing) },
            React.createElement("div", { style: getInnerContentWrapperStyle(menuOpen) },
              React.createElement("div", { style: { width: "100%", height: "100%" } }, children)
            )
          ),
          showVibesSwitch && React.createElement("button", { ref: buttonRef, onClick: () => setMenuOpen(!menuOpen), style: getToggleButtonStyle() },
            React.createElement(VibesSwitch, { size: 80 })
          )
        );
      }
      window.HiddenMenuWrapper = HiddenMenuWrapper;

      // === VibesButton (simplified for standalone apps) ===
      const variantColors = { blue: "var(--vibes-variant-blue)", red: "var(--vibes-variant-red)", yellow: "var(--vibes-variant-yellow)", gray: "var(--vibes-variant-gray)" };
      function VibesButton({ variant = "blue", children, onClick, href, style: customStyle }) {
        const [isHovered, setHovered] = React.useState(false);
        const [isActive, setActive] = React.useState(false);
        const cssColor = variantColors[variant] || variant;
        let transform = "translate(0px, 0px)";
        let boxShadow = "8px 10px 0px 0px " + cssColor + ", 8px 10px 0px 2px var(--vibes-button-border)";
        if (isHovered && !isActive) { transform = "translate(2px, 2px)"; boxShadow = "2px 3px 0px 0px " + cssColor + ", 2px 3px 0px 2px var(--vibes-button-border)"; }
        if (isActive) { transform = "translate(4px, 5px)"; boxShadow = "none"; }
        const baseStyle = { width: "100%", minHeight: "60px", padding: "0.75rem 1.5rem", borderRadius: "12px", fontSize: "1rem", fontWeight: 700, textTransform: "uppercase", letterSpacing: "0.05em", cursor: "pointer", transition: "all 0.15s ease", transform, boxShadow, background: "var(--vibes-button-bg)", color: "var(--vibes-button-text)", border: "2px solid var(--vibes-button-border)", textDecoration: "none", display: "flex", alignItems: "center", justifyContent: "center", ...customStyle };
        const props = { style: baseStyle, onMouseEnter: () => setHovered(true), onMouseLeave: () => { setHovered(false); setActive(false); }, onMouseDown: () => setActive(true), onMouseUp: () => setActive(false) };
        if (href) return React.createElement("a", { ...props, href, target: "_blank", rel: "noopener noreferrer" }, children);
        return React.createElement("button", { ...props, onClick }, children);
      }
      window.VibesButton = VibesButton;

      // === VibesPanel (default menu content) ===
      function VibesPanel({ dbName }) {
        return React.createElement("div", { style: { display: "flex", flexDirection: "column", gap: "12px", alignItems: "center", maxWidth: "400px", margin: "0 auto" } },
          React.createElement(VibesButton, { variant: "blue", href: "https://vibes.diy" }, "VISIT VIBES.DIY"),
          React.createElement(VibesButton, { variant: "yellow", href: "https://vibes.diy" }, "CREATE YOUR OWN")
        );
      }
      window.VibesPanel = VibesPanel;
    </script>
    <script type="text/babel" data-type="module">
      import ReactDOMClient from "react-dom/client";

      /*BUSINESS
name: Blubbert's Holiday Oracle
pitch: Seek festive wisdom from Blubbert Kringle, the mystical Christmas walrus who sees all through the northern lights
customer: Anyone seeking whimsical holiday guidance and a dose of arctic magic
revenue: Free with optional "golden tusk" premium fortunes
*/
import React, { useState, useEffect } from "react";
import { useFireproof } from "use-fireproof";

const FORTUNES = [
  "The candy cane you seek is already in your pocket. Look closer.",
  "A surprise gift approaches from the direction of the setting sun.",
  "Your holiday sweater holds powers you haven't yet discovered.",
  "The one who shares their cookies shall receive infinite warmth.",
  "Beware the elf who speaks in riddles... but heed their message.",
  "Your mittens have memories. Wear the blue ones tomorrow.",
  "A snowflake will whisper your true wish. Listen at midnight.",
  "The fruitcake is a metaphor. Accept it gracefully.",
  "Joy multiplies when divided. Share your laughter with three strangers.",
  "The North Star has noticed you. Good things are aligning.",
  "Your hot cocoa temperature reveals your emotional state. Add more marshmallows.",
  "A reindeer dreams of you tonight. This is significant.",
  "The ornament that falls but doesn't break brings seven years of wonder.",
  "You will find exactly $3.47 in unexpected places this week.",
  "The ghost of holidays past wants you to call your grandmother.",
  "Your gingerbread house predicts your future architecture career.",
];

const ADVICE = [
  "Embrace the chaos of tangled lights",
  "Dance like the nutcracker is watching",
  "Befriend a snowman today",
  "Your eggnog needs more nutmeg",
  "Sing carols to houseplants",
  "Trust the magic of ugly sweaters",
  "Nap like a hibernating walrus",
  "Compliment a stranger's socks",
];

function BlubbertWalrus({ isThinking, magicLevel }) {
  return (
    <svg viewBox="0 0 200 200" className="w-64 h-64 mx-auto">
      {/* Aurora glow behind walrus */}
      <defs>
        <radialGradient id="auroraGlow" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stopColor="oklch(0.6 0.2 160)" stopOpacity="0.4">
            <animate attributeName="stopOpacity" values="0.4;0.7;0.4" dur="3s" repeatCount="indefinite" />
          </stop>
          <stop offset="100%" stopColor="oklch(0.5 0.25 300)" stopOpacity="0" />
        </radialGradient>
        <linearGradient id="santaHat" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stopColor="oklch(0.55 0.22 25)" />
          <stop offset="100%" stopColor="oklch(0.45 0.2 20)" />
        </linearGradient>
        <linearGradient id="walrusBody" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stopColor="oklch(0.5 0.08 50)" />
          <stop offset="100%" stopColor="oklch(0.4 0.06 45)" />
        </linearGradient>
      </defs>
      
      {/* Magic glow */}
      <circle cx="100" cy="110" r="80" fill="url(#auroraGlow)" />
      
      {/* Santa Hat */}
      <path d="M60 70 Q100 20 140 70 L130 75 Q100 35 70 75 Z" fill="url(#santaHat)" />
      <ellipse cx="100" cy="75" rx="45" ry="8" fill="oklch(0.95 0.02 220)" />
      <circle cx="145" cy="35" r="10" fill="oklch(0.95 0.02 220)">
        <animate attributeName="r" values="10;12;10" dur="2s" repeatCount="indefinite" />
      </circle>
      
      {/* Walrus head */}
      <ellipse cx="100" cy="120" rx="55" ry="45" fill="url(#walrusBody)" />
      
      {/* Cheeks/whisker area */}
      <ellipse cx="75" cy="135" rx="22" ry="18" fill="oklch(0.55 0.07 50)" />
      <ellipse cx="125" cy="135" rx="22" ry="18" fill="oklch(0.55 0.07 50)" />
      
      {/* Eyes */}
      <g className={isThinking ? "animate-pulse" : ""}>
        <ellipse cx="80" cy="110" rx="12" ry="14" fill="oklch(0.98 0.01 220)" />
        <ellipse cx="120" cy="110" rx="12" ry="14" fill="oklch(0.98 0.01 220)" />
        <circle cx="82" cy="108" r="6" fill="oklch(0.2 0.05 260)">
          {isThinking && <animate attributeName="cy" values="108;112;108" dur="1s" repeatCount="indefinite" />}
        </circle>
        <circle cx="122" cy="108" r="6" fill="oklch(0.2 0.05 260)">
          {isThinking && <animate attributeName="cy" values="108;112;108" dur="1s" repeatCount="indefinite" />}
        </circle>
        <circle cx="84" cy="106" r="2" fill="oklch(0.95 0.02 220)" />
        <circle cx="124" cy="106" r="2" fill="oklch(0.95 0.02 220)" />
      </g>
      
      {/* Nose */}
      <ellipse cx="100" cy="128" rx="8" ry="6" fill="oklch(0.35 0.08 30)" />
      
      {/* Whisker dots */}
      {[65, 75, 85, 115, 125, 135].map((x, i) => (
        <circle key={i} cx={x} cy={138 + (i % 3) * 4} r="3" fill="oklch(0.4 0.05 40)" />
      ))}
      
      {/* Magnificent tusks */}
      <path d="M80 145 Q75 175 78 190" stroke="oklch(0.92 0.03 80)" strokeWidth="8" fill="none" strokeLinecap="round" />
      <path d="M120 145 Q125 175 122 190" stroke="oklch(0.92 0.03 80)" strokeWidth="8" fill="none" strokeLinecap="round" />
      
      {/* Magic sparkles when high magic level */}
      {magicLevel > 3 && [
        { x: 45, y: 90, delay: 0 },
        { x: 155, y: 95, delay: 0.5 },
        { x: 50, y: 150, delay: 1 },
        { x: 150, y: 145, delay: 1.5 },
      ].map((spark, i) => (
        <g key={i}>
          <circle cx={spark.x} cy={spark.y} r="3" fill="oklch(0.85 0.15 80)">
            <animate attributeName="opacity" values="0;1;0" dur="2s" begin={`${spark.delay}s`} repeatCount="indefinite" />
            <animate attributeName="r" values="2;4;2" dur="2s" begin={`${spark.delay}s`} repeatCount="indefinite" />
          </circle>
        </g>
      ))}
    </svg>
  );
}

function Snowflake({ style }) {
  return (
    <div className="absolute text-[oklch(0.95_0.03_220)] opacity-60 pointer-events-none animate-bounce" style={style}>
      ‚ùÑ
    </div>
  );
}

function MagicStars({ count }) {
  return (
    <div className="flex gap-1 justify-center">
      {Array.from({ length: 5 }).map((_, i) => (
        <span
          key={i}
          className={`text-2xl transition-all duration-300 ${
            i < count ? "text-[oklch(0.8_0.15_80)] scale-110" : "text-[oklch(0.3_0.05_260)] scale-100"
          }`}
        >
          ‚ú¶
        </span>
      ))}
    </div>
  );
}

export default function App() {
  const { useLiveQuery, useDocument } = useFireproof("blubbert-oracle");
  const [isThinking, setIsThinking] = useState(false);
  const [currentFortune, setCurrentFortune] = useState(null);
  const [snowflakes, setSnowflakes] = useState([]);
  
  const savedFortunes = useLiveQuery("type", { key: "fortune" });
  const [newQuestion, setNewQuestion, saveQuestion] = useDocument({ type: "question", text: "" });

  useEffect(() => {
    const flakes = Array.from({ length: 15 }).map((_, i) => ({
      id: i,
      left: `${Math.random() * 100}%`,
      animationDelay: `${Math.random() * 5}s`,
      animationDuration: `${3 + Math.random() * 4}s`,
      fontSize: `${12 + Math.random() * 16}px`,
    }));
    setSnowflakes(flakes);
  }, []);

  const consultOracle = async () => {
    if (!newQuestion.text.trim()) return;
    
    setIsThinking(true);
    setCurrentFortune(null);
    
    // Mystical contemplation time
    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 1500));
    
    const fortune = FORTUNES[Math.floor(Math.random() * FORTUNES.length)];
    const advice = ADVICE[Math.floor(Math.random() * ADVICE.length)];
    const magicLevel = Math.floor(Math.random() * 5) + 1;
    
    const result = {
      type: "fortune",
      question: newQuestion.text,
      fortune,
      advice,
      magicLevel,
      timestamp: Date.now(),
    };
    
    setCurrentFortune(result);
    setIsThinking(false);
    setNewQuestion({ type: "question", text: "" });
  };

  const saveFortune = async () => {
    if (!currentFortune) return;
    const { useLiveQuery: _, useDocument: __, ...fortuneData } = currentFortune;
    await saveQuestion({ ...fortuneData, saved: true });
    setCurrentFortune(null);
  };

  const deleteFortune = async (fortune) => {
    const { database } = useFireproof("blubbert-oracle");
    // We'd need access to the database directly - for now we'll just filter
  };

  return (
    <div className="min-h-screen bg-[linear-gradient(in_oklch,oklch(0.12_0.08_270),oklch(0.08_0.05_240))] p-4 relative overflow-hidden">
      {/* Floating snowflakes */}
      {snowflakes.map(flake => (
        <Snowflake
          key={flake.id}
          style={{
            left: flake.left,
            top: "-20px",
            fontSize: flake.fontSize,
            animation: `fall ${flake.animationDuration} linear infinite`,
            animationDelay: flake.animationDelay,
          }}
        />
      ))}
      
      {/* Aurora effect at top */}
      <div className="absolute top-0 left-0 right-0 h-40 bg-[linear-gradient(in_oklch_90deg,oklch(0.4_0.15_160)_0%,oklch(0.35_0.2_300)_50%,oklch(0.4_0.15_160)_100%)] opacity-30 blur-3xl" />
      
      <style>{`
        @keyframes fall {
          0% { transform: translateY(-20px) rotate(0deg); }
          100% { transform: translateY(100vh) rotate(360deg); }
        }
      `}</style>
      
      <div className="max-w-lg mx-auto relative z-10">
        {/* Title */}
        <div className="text-center mb-6">
          <h1 className="text-3xl font-bold text-[oklch(0.92_0.03_220)] mb-1 tracking-wide">
            ‚úß BLUBBERT'S ‚úß
          </h1>
          <h2 className="text-xl text-[oklch(0.7_0.12_160)] font-light">
            Holiday Oracle
          </h2>
          <p className="text-sm text-[oklch(0.6_0.08_260)] mt-2 italic">
            "From the frozen depths, wisdom rises..."
          </p>
        </div>
        
        {/* The Great Blubbert */}
        <div className="relative">
          <BlubbertWalrus 
            isThinking={isThinking} 
            magicLevel={currentFortune?.magicLevel || 0}
          />
          {isThinking && (
            <p className="text-center text-[oklch(0.7_0.15_300)] animate-pulse mt-2">
              ‚ú® Blubbert gazes into the northern lights... ‚ú®
            </p>
          )}
        </div>
        
        {/* Question Input */}
        <div className="bg-[oklch(0.18_0.05_260)] rounded-2xl p-4 mb-6 border border-[oklch(0.3_0.1_260)]">
          <label className="block text-[oklch(0.8_0.05_220)] text-sm mb-2">
            Whisper your holiday question to Blubbert...
          </label>
          <textarea
            value={newQuestion.text}
            onChange={(e) => setNewQuestion({ ...newQuestion, text: e.target.value })}
            placeholder="What does my holiday season hold?"
            className="w-full bg-[oklch(0.12_0.04_260)] text-[oklch(0.9_0.02_220)] placeholder-[oklch(0.5_0.05_260)] rounded-xl p-3 border border-[oklch(0.25_0.08_260)] focus:border-[oklch(0.5_0.15_160)] focus:outline-none resize-none"
            rows={2}
            disabled={isThinking}
          />
          <button
            onClick={consultOracle}
            disabled={isThinking || !newQuestion.text.trim()}
            className="w-full mt-3 py-3 rounded-xl font-bold text-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-[linear-gradient(in_oklch_90deg,oklch(0.5_0.18_160),oklch(0.45_0.2_200))] text-[oklch(0.95_0.02_220)] hover:brightness-110 active:scale-98"
          >
            {isThinking ? "üîÆ Consulting the Aurora..." : "‚ú¶ Seek Wisdom ‚ú¶"}
          </button>
        </div>
        
        {/* Current Fortune */}
        {currentFortune && (
          <div className="bg-[linear-gradient(in_oklch,oklch(0.22_0.08_280),oklch(0.18_0.06_260))] rounded-2xl p-5 mb-6 border border-[oklch(0.4_0.15_300)] animate-fadeIn">
            <MagicStars count={currentFortune.magicLevel} />
            <p className="text-[oklch(0.5_0.1_160)] text-xs mt-3 mb-1 uppercase tracking-wider">
              You asked:
            </p>
            <p className="text-[oklch(0.75_0.05_220)] italic mb-4">
              "{currentFortune.question}"
            </p>
            <p className="text-[oklch(0.5_0.1_80)] text-xs uppercase tracking-wider">
              Blubbert reveals:
            </p>
            <p className="text-[oklch(0.92_0.03_220)] text-lg my-3 leading-relaxed">
              {currentFortune.fortune}
            </p>
            <p className="text-[oklch(0.65_0.12_160)] text-sm italic mt-4 border-t border-[oklch(0.3_0.1_260)] pt-3">
              üí´ Advice: {currentFortune.advice}
            </p>
            <button
              onClick={saveFortune}
              className="w-full mt-4 py-2 rounded-lg bg-[oklch(0.3_0.1_80)] text-[oklch(0.9_0.05_80)] hover:bg-[oklch(0.35_0.12_80)] transition-colors"
            >
              ‚≠ê Save This Wisdom
            </button>
          </div>
        )}
        
        {/* Saved Fortunes */}
        {savedFortunes.docs.length > 0 && (
          <div className="mt-8">
            <h3 className="text-[oklch(0.75_0.1_160)] text-lg mb-4 flex items-center gap-2">
              <span>üìú</span> Your Collected Wisdoms
            </h3>
            <div className="space-y-3">
              {savedFortunes.docs.map((fortune, i) => (
                <div
                  key={fortune._id}
                  className="bg-[oklch(0.15_0.04_260)] rounded-xl p-4 border border-[oklch(0.25_0.06_260)]"
                >
                  <div className="flex justify-between items-start mb-2">
                    <MagicStars count={fortune.magicLevel} />
                    <span className="text-xs text-[oklch(0.5_0.05_260)]">
                      {new Date(fortune.timestamp).toLocaleDateString()}
                    </span>
                  </div>
                  <p className="text-[oklch(0.85_0.03_220)] text-sm">
                    {fortune.fortune}
                  </p>
                  <p className="text-[oklch(0.6_0.1_160)] text-xs mt-2 italic">
                    ‚ú® {fortune.advice}
                  </p>
                </div>
              ))}
            </div>
          </div>
        )}
        
        {/* Footer */}
        <div className="text-center mt-10 pb-6">
          <p className="text-[oklch(0.45_0.08_260)] text-xs">
            ü¶≠ Blubbert Kringle has been dispensing arctic wisdom since the last ice age ü¶≠
          </p>
        </div>
      </div>
    </div>
  );
}

      // Extract dbName from App's useFireproof call if possible
      const rootElement = document.getElementById("container");
      ReactDOMClient.createRoot(rootElement).render(
        <HiddenMenuWrapper menuContent={<VibesPanel />}>
          <App />
        </HiddenMenuWrapper>
      );
    </script>
  </body>
</html>
